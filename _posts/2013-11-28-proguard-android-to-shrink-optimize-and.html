---
layout: post
title: 'ProGuard + Android: To shrink, optimize, and obfuscate codes'
date: '2013-11-28T08:39:00.002-08:00'
author: Ivan
tags:
- ANDROID
modified_time: '2014-03-28T00:31:32.566-07:00'
thumbnail: https://lh6.googleusercontent.com/cQX3C_c-riNLk0YPJdg_azwK3J-yBhxODQPoOcsfVPiDQZpwc7rwm_CyKOJq34s-nOYVd41Bheewjl94rBqVGywsCNwP9a8Mqy9rn6F1RZFwZmZcagNXca7rrV7D=s72-c
blogger_id: tag:blogger.com,1999:blog-415098333644749081.post-439353595896787870
blogger_orig_url: http://invictuscode.blogspot.com/2013/11/proguard-android-to-shrink-optimize-and.html
---

<div style="text-align: left;"><div style="text-align: justify;">Recently, I have to survey ProGuard. We are planning to use ProGuard to protect codes of Android application. As this title, ProGuard can also shrink and optimize APP. So it's quite useful for Android developers. Android Developers website doesn't have much information of ProGuard. I suggest everyone go to ProGuard website for more information.</div><br /></div><div style="text-align: left;">See&nbsp;<a href="http://developer.android.com/tools/help/proguard.html">http://developer.android.com/tools/help/proguard.html</a>&nbsp;</div><div style="text-align: left;">And this one has more information...&nbsp;<a href="http://proguard.sourceforge.net/">http://proguard.sourceforge.net/</a></div><div style="text-align: left;"><br /></div>Besides ProGuard, DexGuard is another choice.<br />It seems designed for Android Apps. However, if you wanna use it, you need to buy license.<br /><br />To enable ProGuard, we can modify a file in Android project, "project.property".<br /><br />Find this line:<br /><code>#proguard.config=${sdk.dir}/tools/proguard/proguard-android.txt:proguard-project.txt</code><br />Then remove the symbol "#" to enable ProGuard tools.<br /><span id="docs-internal-guid-7912cfb6-9f7c-e3f4-2cd1-ceef5ada5fac"><img height="212" src="https://lh6.googleusercontent.com/cQX3C_c-riNLk0YPJdg_azwK3J-yBhxODQPoOcsfVPiDQZpwc7rwm_CyKOJq34s-nOYVd41Bheewjl94rBqVGywsCNwP9a8Mqy9rn6F1RZFwZmZcagNXca7rrV7D" width="640" /></span><br /><br />After finishing property modification, you can export &nbsp;APK by doing this:<br />Right-click on your project -&gt; select "Android Tools" -&gt; Export Signed/Unsigned package<br /><br />This is a way to use ProGuard on Android application by using default configuration in&nbsp;<span style="font-family: monospace;">${sdk.dir}/tools/proguard/proguard-android.txt:proguard-project.txt</span><br /><span style="font-family: monospace;"><br /></span><span id="docs-internal-guid-20f78092-9f7c-4311-2271-9b8007f51b69"><img height="326px;" src="https://lh4.googleusercontent.com/pn8rMjwN9tUZiEatkYqOvodqQqn632HCUt8-jZrVcIHtmuU4HLD5n7pNDJtU1uQfRG6Ql0RByibLKSY95lJFHwR6AVhFgcxU5uPHzA0wAVq2WLJndCbVNsKOrJ-x" width="200px;" /></span><br />After exporting APK, you will see four txt files had been added: dump.txt, mapping.txt, seeds.txt, and usage.txt.<br /><br />If you want to have custom configuration, you can modify "&lt;your_project_root&gt;/proguard-project.txt".<br />The configuration will override the default one.<br /><br />Reference this website:&nbsp;<a href="http://proguard.sourceforge.net/#manual/usage.html">http://proguard.sourceforge.net/#manual/usage.html</a><br />There are many configuration options we could use.<br /><div style="text-align: justify;">Most important option of all is "-keep". It helps preserving classes, methods, and fields.</div><div style="text-align: justify;">It's essential to keep some classes on Android, such as classes extend Activity, Service, and so on.</div><div style="text-align: justify;">This website also have an example of Android application. The example worth to take a quick look. It has useful configuration suggestions for adopting options. However, it's not that easy to write a perfect configuration when your app getting complicated. So you might need to spend some time and effort on it. I suggest beginners to read following sections: A complete Android application, Processing native methods, Processing native methods, Processing enumeration classes, and Processing serializable classes.</div><div style="text-align: justify;"><br /></div>Let's take a look at the exported APK file.<br /><div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/-YM-QBr7Dg30/UpdzygdqVRI/AAAAAAAAALM/M4SaXCvlsw4/s1600/123123.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://4.bp.blogspot.com/-YM-QBr7Dg30/UpdzygdqVRI/AAAAAAAAALM/M4SaXCvlsw4/s1600/123123.png" /></a></div><br />The package and classes names had been obfuscated.<br />So if someone crack your APK, he/she will get nothing!